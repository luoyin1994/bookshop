!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=35)}([function(t,e,n){"use strict";n(2),n(1)},function(t,e){},function(t,e){},,,,,function(t,e,n){"use strict";n(11),n(12),n(13)},function(t,e,n){"use strict";n(32),n(31),n(29),n(30),n(28)},,,function(t,e,n){"use strict";jQuery.base64=function(t){function e(t,e){var n=i.indexOf(t.charAt(e));if(n===-1)throw"Cannot decode base64";return n}function n(t){var n,r,o=0,i=t.length,c=[];if(t=String(t),0===i)return t;if(i%4!=0)throw"Cannot decode base64";for(t.charAt(i-1)===a&&(o=1,t.charAt(i-2)===a&&(o=2),i-=4),n=0;n<i;n+=4)r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6|e(t,n+3),c.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(o){case 1:r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6,c.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=e(t,n)<<18|e(t,n+1)<<12,c.push(String.fromCharCode(r>>16))}return c.join("")}function r(t,e){var n=t.charCodeAt(e);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function o(t){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";t=String(t);var e,n,o=[],c=t.length-t.length%3;if(0===t.length)return t;for(e=0;e<c;e+=3)n=r(t,e)<<16|r(t,e+1)<<8|r(t,e+2),o.push(i.charAt(n>>18)),o.push(i.charAt(n>>12&63)),o.push(i.charAt(n>>6&63)),o.push(i.charAt(63&n));switch(t.length-c){case 1:n=r(t,e)<<16,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+a+a);break;case 2:n=r(t,e)<<16|r(t,e+1)<<8,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+i.charAt(n>>6&63)+a)}return o.join("")}var a="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:n,encode:o,VERSION:"1.0"}}(jQuery)},function(t,e,n){"use strict";!function(t){function e(){}function n(t){i=[t]}function r(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function a(a){function p(t){K++||(W(),Q&&(U[L]={s:[t]}),M&&(t=M.apply(a,[t])),r(O,a,[t,C,a]),r(G,a,[a,C]))}function R(t){K++||(W(),Q&&t!=F&&(U[L]=t),r(E,a,[a,t]),r(G,a,[a,t]))}a=t.extend({},w,a);var P,z,T,k,D,O=a.success,E=a.error,G=a.complete,M=a.dataFilter,N=a.callbackParameter,$=a.callback,V=a.cache,Q=a.pageCache,q=a.charset,L=a.url,H=a.data,J=a.timeout,K=0,W=e;return _&&_(function(t){t.done(O).fail(E),O=t.resolve,E=t.reject}).promise(a),a.abort=function(){!K++&&W()},r(a.beforeSend,a,[a])===!1||K?a:(L=L||u,H=H?"string"==typeof H?H:t.param(H,a.traditional):u,L+=H?o(L)+H:u,N&&(L+=o(L)+encodeURIComponent(N)+"=?"),!V&&!Q&&(L+=o(L)+"_"+(new Date).getTime()+"="),L=L.replace(/=\?(&|$)/,"="+$+"$1"),Q&&(P=U[L])?P.s?p(P.s[0]):R(P):(x[$]=n,T=t(v)[0],T.id=f+A++,q&&(T[s]=q),j&&j.version()<11.6?(k=t(v)[0]).text="document.getElementById('"+T.id+"')."+d+"()":T[c]=c,B&&(T.htmlFor=T.id,T.event=g),T[S]=T[d]=T[m]=function(t){if(!T[I]||!/i/.test(T[I])){try{T[g]&&T[g]()}catch(t){}t=i,i=0,t?p(t[0]):R(h)}},T.src=L,W=function(t){D&&clearTimeout(D),T[m]=T[S]=T[d]=null,y[b](T),k&&y[b](k)},y[l](T,z=y.firstChild),k&&y[l](k,z),D=J>0&&setTimeout(function(){R(F)},J)),a)}var i,c="async",s="charset",u="",h="error",l="insertBefore",f="_jqjsp",p="on",g=p+"click",d=p+h,S=p+"load",m=p+"readystatechange",I="readyState",b="removeChild",v="<script>",C="success",F="timeout",x=window,_=t.Deferred,y=t("head")[0]||document.documentElement,U={},A=0,w={callback:f,url:location.href},j=x.opera,B=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;a.setup=function(e){t.extend(w,e)},t.jsonp=a}(jQuery)},function(t,e,n){"use strict";new Vue({el:"#app",data:{fictionData:"",topBottomFlag:!1,hidepannel:!0,FontPannelFlag:!1,bgColor:"#ffffe9",passageFontSize:"15px",nightFlag:!1,alertFlag:!1,chapterId:0,chapterTotal:1},mounted:function(){var t=this;this.$nextTick(function(){this.ReaderModel(),this.ReaderModel.init(function(e){t.fictionData=e}),this.Util(),this.getStorage()})},methods:{getStorage:function(){this.bgColor=this.Util.StorageGetter("last_bgColor")?this.Util.StorageGetter("last_bgColor"):"#ffffe9",this.passageFontSize=this.Util.StorageGetter("last_passageFontSize")?this.Util.StorageGetter("last_passageFontSize"):"15px",this.chapterId=this.Util.StorageGetter("last_chapterId")?this.Util.StorageGetter("last_chapterId"):0,this.nightFlag="true"===this.Util.StorageGetter("last_nightFlag")},toggleTopBottom:function(){this.topBottomFlag=!this.topBottomFlag},toggleFontPannel:function(){this.hidepannel=!this.hidepannel},changeBgColor:function(t){var e=t.currentTarget;this.bgColor=getComputedStyle(e,null).getPropertyValue("background-color"),this.Util.StorageSetter("last_bgColor",this.bgColor)},enlargeFontSize:function(t){var e=1,n=parseInt(this.passageFontSize);if(void 0===t||t>0){if(n>=25)return;this.passageFontSize=n+e+"px"}else if(t<0){if(n<=10)return;this.passageFontSize=n-e+"px"}else this.passageFontSize="15px";this.Util.StorageSetter("last_passageFontSize",this.passageFontSize)},toggleDayNight:function(){this.nightFlag=!this.nightFlag,this.Util.StorageSetter("last_nightFlag",this.nightFlag)},prevChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.prevChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},nextChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.nextChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},Util:function(){this.Util=function(){var t="html5_reader_";return{StorageGetter:function(e){return localStorage.getItem(t+e)},StorageSetter:function(e,n){return localStorage.setItem(t+e,n)},getBSONP:function(t,e){return $.jsonp({url:t,cache:!0,callback:"duokan_fiction_chapter",success:function(t){var n=$.base64.decode(t),r=decodeURIComponent(escape(n));e(JSON.parse(r))}})}}}()},ReaderModel:function(){var t=this;this.ReaderModel=function(){var e=function(t){n().then(function(){return r()}).then(function(e){t&&t(e)})},n=function(){return new Promise(function(e,n){$.get("/data/chapterLength",function(r){0==r.result?(t.chapterTotal=r.chapters.length,e(r)):n({msg:"fail"})},"json")})},r=function(){return new Promise(function(e,n){$.get("/data/chapterUrl?chapter_id="+t.chapterId,function(r){if(0==r.result){var o=r.url;t.Util.getBSONP(o,function(t){e(t)})}else n({msg:"fail"})},"json")})};return{init:e,prevChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId-=1,t.chapterId<0)return t.alertFlag=!0,void(t.chapterId=0);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)},nextChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId+=1,t.chapterId>t.chapterTotal-1)return t.alertFlag=!0,void(t.chapterId=t.chapterTotal-1);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)}}}()}}})},,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,n){n(0),n(8),t.exports=n(7)}]);