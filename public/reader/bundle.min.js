!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=57)}({0:function(t,e,n){"use strict";n(3),n(2),n(1)},1:function(t,e){},15:function(t,e,n){"use strict";n(23),n(24),n(25)},16:function(t,e,n){"use strict";n(52),n(47),n(45),n(46),n(44)},2:function(t,e){},23:function(t,e,n){"use strict";jQuery.base64=function(t){function e(t,e){var n=i.indexOf(t.charAt(e));if(n===-1)throw"Cannot decode base64";return n}function n(t){var n,r,o=0,i=t.length,c=[];if(t=String(t),0===i)return t;if(i%4!=0)throw"Cannot decode base64";for(t.charAt(i-1)===a&&(o=1,t.charAt(i-2)===a&&(o=2),i-=4),n=0;n<i;n+=4)r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6|e(t,n+3),c.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(o){case 1:r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6,c.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=e(t,n)<<18|e(t,n+1)<<12,c.push(String.fromCharCode(r>>16))}return c.join("")}function r(t,e){var n=t.charCodeAt(e);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function o(t){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";t=String(t);var e,n,o=[],c=t.length-t.length%3;if(0===t.length)return t;for(e=0;e<c;e+=3)n=r(t,e)<<16|r(t,e+1)<<8|r(t,e+2),o.push(i.charAt(n>>18)),o.push(i.charAt(n>>12&63)),o.push(i.charAt(n>>6&63)),o.push(i.charAt(63&n));switch(t.length-c){case 1:n=r(t,e)<<16,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+a+a);break;case 2:n=r(t,e)<<16|r(t,e+1)<<8,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+i.charAt(n>>6&63)+a)}return o.join("")}var a="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:n,encode:o,VERSION:"1.0"}}(jQuery)},24:function(t,e,n){"use strict";!function(t){function e(){}function n(t){i=[t]}function r(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function a(a){function p(t){J++||(K(),V&&(w[q]={s:[t]}),O&&(t=O.apply(a,[t])),r(T,a,[t,C,a]),r(M,a,[a,C]))}function P(t){J++||(K(),V&&t!=x&&(w[q]=t),r(E,a,[a,t]),r(M,a,[a,t]))}a=t.extend({},A,a);var R,z,N,k,D,T=a.success,E=a.error,M=a.complete,O=a.dataFilter,G=a.callbackParameter,$=a.callback,L=a.cache,V=a.pageCache,Q=a.charset,q=a.url,H=a.data,Y=a.timeout,J=0,K=e;return y&&y(function(t){t.done(T).fail(E),T=t.resolve,E=t.reject}).promise(a),a.abort=function(){!J++&&K()},r(a.beforeSend,a,[a])===!1||J?a:(q=q||l,H=H?"string"==typeof H?H:t.param(H,a.traditional):l,q+=H?o(q)+H:l,G&&(q+=o(q)+encodeURIComponent(G)+"=?"),!L&&!V&&(q+=o(q)+"_"+(new Date).getTime()+"="),q=q.replace(/=\?(&|$)/,"="+$+"$1"),V&&(R=w[q])?R.s?p(R.s[0]):P(R):(F[$]=n,N=t(b)[0],N.id=f+U++,Q&&(N[s]=Q),j&&j.version()<11.6?(k=t(b)[0]).text="document.getElementById('"+N.id+"')."+g+"()":N[c]=c,B&&(N.htmlFor=N.id,N.event=d),N[m]=N[g]=N[S]=function(t){if(!N[v]||!/i/.test(N[v])){try{N[d]&&N[d]()}catch(t){}t=i,i=0,t?p(t[0]):P(u)}},N.src=q,K=function(t){D&&clearTimeout(D),N[S]=N[m]=N[g]=null,_[I](N),k&&_[I](k)},_[h](N,z=_.firstChild),k&&_[h](k,z),D=Y>0&&setTimeout(function(){P(x)},Y)),a)}var i,c="async",s="charset",l="",u="error",h="insertBefore",f="_jqjsp",p="on",d=p+"click",g=p+u,m=p+"load",S=p+"readystatechange",v="readyState",I="removeChild",b="<script>",C="success",x="timeout",F=window,y=t.Deferred,_=t("head")[0]||document.documentElement,w={},U=0,A={callback:f,url:location.href},j=F.opera,B=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;a.setup=function(e){t.extend(A,e)},t.jsonp=a}(jQuery)},25:function(t,e,n){"use strict";new Vue({el:"#app",data:{fictionData:"",topBottomFlag:!1,hidepannel:!0,FontPannelFlag:!1,bgColor:"#ffffe9",passageFontSize:"18px",nightFlag:!1,alertFlag:!1,chapterId:0,chapterTotal:1},beforeCreate:function(){document.write('<div id="loadingDiv" style="position:absolute;left:0;right:0;top:0;bottom:0;background:#f6faff;opacity:1;filter:alpha(opacity=80);z-index:10000;"><div style="position:relative;top:50%;transform:translateY(-140%);font:22px / 57px \'Microsoft YaHei\'; padding-left: 25px; border-radius:5px ;padding-right: 25px;  color: #aba5ff;text-align:center;">页面加载中，请等待...</div></div>')},mounted:function(){var t=this;this.$nextTick(function(){this.ReaderModel(),this.Util(),this.getStorage(),t.setChapterId(),this.ReaderModel.init(function(e){t.fictionData=e,t.completeLoading()})})},methods:{completeLoading:function(){var t=document.getElementById("loadingDiv");t.parentNode.removeChild(t)},getStorage:function(){this.bgColor=this.Util.StorageGetter("last_bgColor")?this.Util.StorageGetter("last_bgColor"):"#ffffe9",this.passageFontSize=this.Util.StorageGetter("last_passageFontSize")?this.Util.StorageGetter("last_passageFontSize"):"15px",this.chapterId=this.Util.StorageGetter("last_chapterId")?this.Util.StorageGetter("last_chapterId"):0,this.nightFlag="true"===this.Util.StorageGetter("last_nightFlag")},toggleTopBottom:function(){this.topBottomFlag=!this.topBottomFlag},toggleFontPannel:function(){this.hidepannel=!this.hidepannel},changeBgColor:function(t){var e=t.currentTarget;this.bgColor=getComputedStyle(e,null).getPropertyValue("background-color"),this.Util.StorageSetter("last_bgColor",this.bgColor)},enlargeFontSize:function(t){var e=2,n=parseInt(this.passageFontSize);if(void 0===t||t>0){if(n>=28)return;this.passageFontSize=n+e+"px"}else if(t<0){if(n<=12)return;this.passageFontSize=n-e+"px"}else this.passageFontSize="18px";this.Util.StorageSetter("last_passageFontSize",this.passageFontSize)},toggleDayNight:function(){this.nightFlag=!this.nightFlag,this.Util.StorageSetter("last_nightFlag",this.nightFlag)},prevChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.prevChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},nextChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.nextChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},Util:function(){this.Util=function(){var t="html5_reader_";return{StorageGetter:function(e){var n=localStorage.getItem(t+e);return isNaN(n)?0:localStorage.getItem(t+e)},StorageSetter:function(e,n){return localStorage.setItem(t+e,Number(n))},getBSONP:function(t,e){return $.jsonp({url:t,cache:!0,callback:"duokan_fiction_chapter",success:function(t){var n=$.base64.decode(t),r=decodeURIComponent(escape(n));e(JSON.parse(r))}})}}}()},ReaderModel:function(){var t=this;this.ReaderModel=function(){var e=function(t){n().then(function(){return r()}).then(function(e){t&&t(e)})},n=function(){return new Promise(function(e,n){$.get("/data/chapterList",function(r){0==r.result?(t.chapterTotal=r.item.toc.length,e(r)):n({msg:"fail"})},"json")})},r=function(){return new Promise(function(e,n){isNaN(t.chapterId)&&(t.chapterId=0),$.get("/data/chapterUrl?chapter_id="+t.chapterId,function(r){if(0==r.result){var o=r.url;t.Util.getBSONP(o,function(t){e(t)})}else n({msg:"fail"})},"json")})};return{init:e,prevChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId-=1,t.chapterId<0)return t.alertFlag=!0,void(t.chapterId=0);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)},nextChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId+=1,t.chapterId>t.chapterTotal-1)return t.alertFlag=!0,void(t.chapterId=t.chapterTotal-1);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)}}}()},goCatalogPage:function(){window.location.href="/reader/catalog?id="+this.chapterId},setChapterId:function(){var t=window.location.search;void 0!==t&&(t=t.replace("?id=",""),this.chapterId=parseInt(t))}}})},3:function(t,e){},44:function(t,e){},45:function(t,e){},46:function(t,e){},47:function(t,e){},52:function(t,e){},57:function(t,e,n){n(0),n(16),t.exports=n(15)}});