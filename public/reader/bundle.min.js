!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=40)}([function(t,e,n){"use strict";n(2),n(1)},function(t,e){},function(t,e){},,,,,,,,,function(t,e,n){"use strict";n(15),n(16),n(17)},function(t,e,n){"use strict";n(36),n(35),n(33),n(34),n(32)},,,function(t,e,n){"use strict";jQuery.base64=function(t){function e(t,e){var n=a.indexOf(t.charAt(e));if(n===-1)throw"Cannot decode base64";return n}function n(t){var n,r,o=0,a=t.length,c=[];if(t=String(t),0===a)return t;if(a%4!=0)throw"Cannot decode base64";for(t.charAt(a-1)===i&&(o=1,t.charAt(a-2)===i&&(o=2),a-=4),n=0;n<a;n+=4)r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6|e(t,n+3),c.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(o){case 1:r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6,c.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=e(t,n)<<18|e(t,n+1)<<12,c.push(String.fromCharCode(r>>16))}return c.join("")}function r(t,e){var n=t.charCodeAt(e);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function o(t){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";t=String(t);var e,n,o=[],c=t.length-t.length%3;if(0===t.length)return t;for(e=0;e<c;e+=3)n=r(t,e)<<16|r(t,e+1)<<8|r(t,e+2),o.push(a.charAt(n>>18)),o.push(a.charAt(n>>12&63)),o.push(a.charAt(n>>6&63)),o.push(a.charAt(63&n));switch(t.length-c){case 1:n=r(t,e)<<16,o.push(a.charAt(n>>18)+a.charAt(n>>12&63)+i+i);break;case 2:n=r(t,e)<<16|r(t,e+1)<<8,o.push(a.charAt(n>>18)+a.charAt(n>>12&63)+a.charAt(n>>6&63)+i)}return o.join("")}var i="=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:n,encode:o,VERSION:"1.0"}}(jQuery)},function(t,e,n){"use strict";!function(t){function e(){}function n(t){a=[t]}function r(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function i(i){function p(t){W++||(Y(),V&&(w[Q]={s:[t]}),G&&(t=G.apply(i,[t])),r(T,i,[t,x,i]),r(O,i,[i,x]))}function R(t){W++||(Y(),V&&t!=C&&(w[Q]=t),r(M,i,[i,t]),r(O,i,[i,t]))}i=t.extend({},A,i);var k,z,P,D,E,T=i.success,M=i.error,O=i.complete,G=i.dataFilter,N=i.callbackParameter,$=i.callback,L=i.cache,V=i.pageCache,H=i.charset,Q=i.url,q=i.data,J=i.timeout,W=0,Y=e;return y&&y(function(t){t.done(T).fail(M),T=t.resolve,M=t.reject}).promise(i),i.abort=function(){!W++&&Y()},r(i.beforeSend,i,[i])===!1||W?i:(Q=Q||l,q=q?"string"==typeof q?q:t.param(q,i.traditional):l,Q+=q?o(Q)+q:l,N&&(Q+=o(Q)+encodeURIComponent(N)+"=?"),!L&&!V&&(Q+=o(Q)+"_"+(new Date).getTime()+"="),Q=Q.replace(/=\?(&|$)/,"="+$+"$1"),V&&(k=w[Q])?k.s?p(k.s[0]):R(k):(F[$]=n,P=t(I)[0],P.id=f+U++,H&&(P[s]=H),j&&j.version()<11.6?(D=t(I)[0]).text="document.getElementById('"+P.id+"')."+g+"()":P[c]=c,B&&(P.htmlFor=P.id,P.event=d),P[m]=P[g]=P[S]=function(t){if(!P[v]||!/i/.test(P[v])){try{P[d]&&P[d]()}catch(t){}t=a,a=0,t?p(t[0]):R(u)}},P.src=Q,Y=function(t){E&&clearTimeout(E),P[S]=P[m]=P[g]=null,_[b](P),D&&_[b](D)},_[h](P,z=_.firstChild),D&&_[h](D,z),E=J>0&&setTimeout(function(){R(C)},J)),i)}var a,c="async",s="charset",l="",u="error",h="insertBefore",f="_jqjsp",p="on",d=p+"click",g=p+u,m=p+"load",S=p+"readystatechange",v="readyState",b="removeChild",I="<script>",x="success",C="timeout",F=window,y=t.Deferred,_=t("head")[0]||document.documentElement,w={},U=0,A={callback:f,url:location.href},j=F.opera,B=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;i.setup=function(e){t.extend(A,e)},t.jsonp=i}(jQuery)},function(t,e,n){"use strict";new Vue({el:"#app",data:{fictionData:"",topBottomFlag:!1,hidepannel:!0,FontPannelFlag:!1,bgColor:"#ffffe9",passageFontSize:"15px",nightFlag:!1,alertFlag:!1,chapterId:0,chapterTotal:1},beforeCreate:function(){var t=document.documentElement.clientHeight,e=document.documentElement.clientWidth,n=t>61?(t-61)/2:0,r=e>215?(e-215)/2:0,o='<div id="loadingDiv" style="position:absolute;left:0;width:100%;height:'+t+'px;top:0;background:#f3f8ff;opacity:1;filter:alpha(opacity=80);z-index:10000;"><div style="position: absolute; cursor1: wait; left: '+r+"px; top:"+n+"px; width: auto; height: 57px; line-height: 57px; padding-left: 50px; padding-right: 5px; background: #ffffff url(Image/loading.gif) no-repeat scroll 5px 10px; border: 2px solid #95b8e7; color: #696969; font-family:'Microsoft YaHei';\">页面加载中，请等待...</div></div>";document.write(o)},mounted:function(){var t=this;this.$nextTick(function(){this.ReaderModel(),this.Util(),this.getStorage(),this.ReaderModel.init(function(e){t.fictionData=e,t.completeLoading()})})},methods:{completeLoading:function(){var t=document.getElementById("loadingDiv");t.parentNode.removeChild(t)},getStorage:function(){this.bgColor=this.Util.StorageGetter("last_bgColor")?this.Util.StorageGetter("last_bgColor"):"#ffffe9",this.passageFontSize=this.Util.StorageGetter("last_passageFontSize")?this.Util.StorageGetter("last_passageFontSize"):"15px",this.chapterId=this.Util.StorageGetter("last_chapterId")?this.Util.StorageGetter("last_chapterId"):0,this.nightFlag="true"===this.Util.StorageGetter("last_nightFlag")},toggleTopBottom:function(){this.topBottomFlag=!this.topBottomFlag},toggleFontPannel:function(){this.hidepannel=!this.hidepannel},changeBgColor:function(t){var e=t.currentTarget;this.bgColor=getComputedStyle(e,null).getPropertyValue("background-color"),this.Util.StorageSetter("last_bgColor",this.bgColor)},enlargeFontSize:function(t){var e=1,n=parseInt(this.passageFontSize);if(void 0===t||t>0){if(n>=25)return;this.passageFontSize=n+e+"px"}else if(t<0){if(n<=10)return;this.passageFontSize=n-e+"px"}else this.passageFontSize="15px";this.Util.StorageSetter("last_passageFontSize",this.passageFontSize)},toggleDayNight:function(){this.nightFlag=!this.nightFlag,this.Util.StorageSetter("last_nightFlag",this.nightFlag)},prevChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.prevChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},nextChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.nextChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},Util:function(){this.Util=function(){var t="html5_reader_";return{StorageGetter:function(e){return localStorage.getItem(t+e)},StorageSetter:function(e,n){return localStorage.setItem(t+e,n)},getBSONP:function(t,e){return $.jsonp({url:t,cache:!0,callback:"duokan_fiction_chapter",success:function(t){var n=$.base64.decode(t),r=decodeURIComponent(escape(n));e(JSON.parse(r))}})}}}()},ReaderModel:function(){var t=this;this.ReaderModel=function(){var e=function(t){n().then(function(){return r()}).then(function(e){t&&t(e)})},n=function(){return new Promise(function(e,n){$.get("/data/chapterLength",function(r){0==r.result?(t.chapterTotal=r.chapters.length,e(r)):n({msg:"fail"})},"json")})},r=function(){return new Promise(function(e,n){$.get("/data/chapterUrl?chapter_id="+t.chapterId,function(r){if(0==r.result){var o=r.url;t.Util.getBSONP(o,function(t){e(t)})}else n({msg:"fail"})},"json")})};return{init:e,prevChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId-=1,t.chapterId<0)return t.alertFlag=!0,void(t.chapterId=0);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)},nextChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId+=1,t.chapterId>t.chapterTotal-1)return t.alertFlag=!0,void(t.chapterId=t.chapterTotal-1);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)}}}()}}})},,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,n){n(0),n(12),t.exports=n(11)}]);