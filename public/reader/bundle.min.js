!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=57)}({0:function(t,e,n){"use strict";n(3),n(2),n(1)},1:function(t,e){},15:function(t,e,n){"use strict";n(23),n(24),n(25)},16:function(t,e,n){"use strict";n(52),n(47),n(45),n(46),n(44)},2:function(t,e){},23:function(t,e,n){"use strict";jQuery.base64=function(t){function e(t,e){var n=a.indexOf(t.charAt(e));if(n===-1)throw"Cannot decode base64";return n}function n(t){var n,r,o=0,a=t.length,c=[];if(t=String(t),0===a)return t;if(a%4!=0)throw"Cannot decode base64";for(t.charAt(a-1)===i&&(o=1,t.charAt(a-2)===i&&(o=2),a-=4),n=0;n<a;n+=4)r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6|e(t,n+3),c.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(o){case 1:r=e(t,n)<<18|e(t,n+1)<<12|e(t,n+2)<<6,c.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=e(t,n)<<18|e(t,n+1)<<12,c.push(String.fromCharCode(r>>16))}return c.join("")}function r(t,e){var n=t.charCodeAt(e);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function o(t){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";t=String(t);var e,n,o=[],c=t.length-t.length%3;if(0===t.length)return t;for(e=0;e<c;e+=3)n=r(t,e)<<16|r(t,e+1)<<8|r(t,e+2),o.push(a.charAt(n>>18)),o.push(a.charAt(n>>12&63)),o.push(a.charAt(n>>6&63)),o.push(a.charAt(63&n));switch(t.length-c){case 1:n=r(t,e)<<16,o.push(a.charAt(n>>18)+a.charAt(n>>12&63)+i+i);break;case 2:n=r(t,e)<<16|r(t,e+1)<<8,o.push(a.charAt(n>>18)+a.charAt(n>>12&63)+a.charAt(n>>6&63)+i)}return o.join("")}var i="=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:n,encode:o,VERSION:"1.0"}}(jQuery)},24:function(t,e,n){"use strict";!function(t){function e(){}function n(t){a=[t]}function r(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function i(i){function p(t){W++||(Y(),V&&(_[Q]={s:[t]}),O&&(t=O.apply(i,[t])),r(E,i,[t,C,i]),r(M,i,[i,C]))}function P(t){W++||(Y(),V&&t!=x&&(_[Q]=t),r(T,i,[i,t]),r(M,i,[i,t]))}i=t.extend({},A,i);var R,k,z,N,D,E=i.success,T=i.error,M=i.complete,O=i.dataFilter,G=i.callbackParameter,$=i.callback,L=i.cache,V=i.pageCache,H=i.charset,Q=i.url,q=i.data,J=i.timeout,W=0,Y=e;return y&&y(function(t){t.done(E).fail(T),E=t.resolve,T=t.reject}).promise(i),i.abort=function(){!W++&&Y()},r(i.beforeSend,i,[i])===!1||W?i:(Q=Q||l,q=q?"string"==typeof q?q:t.param(q,i.traditional):l,Q+=q?o(Q)+q:l,G&&(Q+=o(Q)+encodeURIComponent(G)+"=?"),!L&&!V&&(Q+=o(Q)+"_"+(new Date).getTime()+"="),Q=Q.replace(/=\?(&|$)/,"="+$+"$1"),V&&(R=_[Q])?R.s?p(R.s[0]):P(R):(F[$]=n,z=t(b)[0],z.id=f+U++,H&&(z[s]=H),j&&j.version()<11.6?(N=t(b)[0]).text="document.getElementById('"+z.id+"')."+g+"()":z[c]=c,B&&(z.htmlFor=z.id,z.event=d),z[m]=z[g]=z[S]=function(t){if(!z[v]||!/i/.test(z[v])){try{z[d]&&z[d]()}catch(t){}t=a,a=0,t?p(t[0]):P(u)}},z.src=Q,Y=function(t){D&&clearTimeout(D),z[S]=z[m]=z[g]=null,w[I](z),N&&w[I](N)},w[h](z,k=w.firstChild),N&&w[h](N,k),D=J>0&&setTimeout(function(){P(x)},J)),i)}var a,c="async",s="charset",l="",u="error",h="insertBefore",f="_jqjsp",p="on",d=p+"click",g=p+u,m=p+"load",S=p+"readystatechange",v="readyState",I="removeChild",b="<script>",C="success",x="timeout",F=window,y=t.Deferred,w=t("head")[0]||document.documentElement,_={},U=0,A={callback:f,url:location.href},j=F.opera,B=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;i.setup=function(e){t.extend(A,e)},t.jsonp=i}(jQuery)},25:function(t,e,n){"use strict";new Vue({el:"#app",data:{fictionData:"",topBottomFlag:!1,hidepannel:!0,FontPannelFlag:!1,bgColor:"#ffffe9",passageFontSize:"18px",nightFlag:!1,alertFlag:!1,chapterId:0,chapterTotal:1},beforeCreate:function(){var t=document.documentElement.clientHeight,e=document.documentElement.clientWidth,n=t>61?(t-61)/2:0,r=e>215?(e-215)/2:0,o='<div id="loadingDiv" style="position:absolute;left:0;width:100%;height:'+t+'px;top:0;background:#f3f8ff;opacity:1;filter:alpha(opacity=80);z-index:10000;"><div style="position: absolute; cursor1: wait; left: '+r+"px; top:"+n+"px; width: auto; height: 57px; line-height: 57px; padding-left: 50px; padding-right: 5px; background: #ffffff url(Image/loading.gif) no-repeat scroll 5px 10px; border: 2px solid #95b8e7; color: #696969; font-family:'Microsoft YaHei';\">页面加载中，请等待...</div></div>";document.write(o)},mounted:function(){var t=this;this.$nextTick(function(){this.ReaderModel(),this.Util(),this.getStorage(),t.setChapterId(),this.ReaderModel.init(function(e){t.fictionData=e,t.completeLoading()})})},methods:{completeLoading:function(){var t=document.getElementById("loadingDiv");t.parentNode.removeChild(t)},getStorage:function(){this.bgColor=this.Util.StorageGetter("last_bgColor")?this.Util.StorageGetter("last_bgColor"):"#ffffe9",this.passageFontSize=this.Util.StorageGetter("last_passageFontSize")?this.Util.StorageGetter("last_passageFontSize"):"15px",this.chapterId=this.Util.StorageGetter("last_chapterId")?this.Util.StorageGetter("last_chapterId"):0,this.nightFlag="true"===this.Util.StorageGetter("last_nightFlag")},toggleTopBottom:function(){this.topBottomFlag=!this.topBottomFlag},toggleFontPannel:function(){this.hidepannel=!this.hidepannel},changeBgColor:function(t){var e=t.currentTarget;this.bgColor=getComputedStyle(e,null).getPropertyValue("background-color"),this.Util.StorageSetter("last_bgColor",this.bgColor)},enlargeFontSize:function(t){var e=2,n=parseInt(this.passageFontSize);if(void 0===t||t>0){if(n>=28)return;this.passageFontSize=n+e+"px"}else if(t<0){if(n<=12)return;this.passageFontSize=n-e+"px"}else this.passageFontSize="18px";this.Util.StorageSetter("last_passageFontSize",this.passageFontSize)},toggleDayNight:function(){this.nightFlag=!this.nightFlag,this.Util.StorageSetter("last_nightFlag",this.nightFlag)},prevChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.prevChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},nextChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.nextChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},Util:function(){this.Util=function(){var t="html5_reader_";return{StorageGetter:function(e){var n=localStorage.getItem(t+e);return isNaN(n)?0:localStorage.getItem(t+e)},StorageSetter:function(e,n){return localStorage.setItem(t+e,Number(n))},getBSONP:function(t,e){return $.jsonp({url:t,cache:!0,callback:"duokan_fiction_chapter",success:function(t){var n=$.base64.decode(t),r=decodeURIComponent(escape(n));e(JSON.parse(r))}})}}}()},ReaderModel:function(){var t=this;this.ReaderModel=function(){var e=function(t){n().then(function(){return r()}).then(function(e){t&&t(e)})},n=function(){return new Promise(function(e,n){$.get("/data/chapterList",function(r){0==r.result?(t.chapterTotal=r.item.toc.length,e(r)):n({msg:"fail"})},"json")})},r=function(){return new Promise(function(e,n){isNaN(t.chapterId)&&(t.chapterId=0),$.get("/data/chapterUrl?chapter_id="+t.chapterId,function(r){if(0==r.result){var o=r.url;t.Util.getBSONP(o,function(t){e(t)})}else n({msg:"fail"})},"json")})};return{init:e,prevChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId-=1,t.chapterId<0)return t.alertFlag=!0,void(t.chapterId=0);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)},nextChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId+=1,t.chapterId>t.chapterTotal-1)return t.alertFlag=!0,void(t.chapterId=t.chapterTotal-1);r().then(function(t){e&&e(t)}),t.Util.StorageSetter("last_chapterId",t.chapterId)}}}()},goCatalogPage:function(){window.location.href="/reader/catalog?id="+this.chapterId},setChapterId:function(){var t=window.location.search;void 0!==t&&(t=t.replace("?id=",""),this.chapterId=parseInt(t))}}})},3:function(t,e){},44:function(t,e){},45:function(t,e){},46:function(t,e){},47:function(t,e){},52:function(t,e){},57:function(t,e,n){n(0),n(16),t.exports=n(15)}});