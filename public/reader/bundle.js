!function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=52)}({0:function(t,e,n){"use strict";n(2),n(1)},1:function(t,e){},12:function(t,e,n){"use strict";n(17)},13:function(t,e,n){"use strict";n(47),n(46),n(44),n(45),n(43)},17:function(t,e,n){"use strict";window.jQuery=$,new Vue({el:"#app",data:{fictionData:"",topBottomFlag:!1,hidepannel:!0,FontPannelFlag:!1,bgColor:"#ffffe9",passageFontSize:"15px",nightFlag:!1,alertFlag:!1,chapterId:1,chapterTotal:1},mounted:function(){var t=this;this.$nextTick(function(){this.ReaderModel(),this.ReaderModel.init(function(e){t.fictionData=e}),this.Util(),this.getStorage()})},methods:{getStorage:function(){this.bgColor=this.Util.StorageGetter("last_bgColor")?this.Util.StorageGetter("last_bgColor"):"#ffffe9",this.passageFontSize=this.Util.StorageGetter("last_passageFontSize")?this.Util.StorageGetter("last_passageFontSize"):"15px",this.chapterId=this.Util.StorageGetter("last_chapterId")?this.Util.StorageGetter("last_chapterId"):0,this.nightFlag="true"===this.Util.StorageGetter("last_nightFlag")},toggleTopBottom:function(){this.topBottomFlag=!this.topBottomFlag},toggleFontPannel:function(){this.hidepannel=!this.hidepannel},changeBgColor:function(t){var e=t.currentTarget;this.bgColor=getComputedStyle(e,null).getPropertyValue("background-color"),this.Util.StorageSetter("last_bgColor",this.bgColor)},enlargeFontSize:function(t){var e=1,n=parseInt(this.passageFontSize);if(void 0===t||t>0){if(n>=25)return;this.passageFontSize=n+e+"px"}else if(t<0){if(n<=10)return;this.passageFontSize=n-e+"px"}else this.passageFontSize="15px";this.Util.StorageSetter("last_passageFontSize",this.passageFontSize)},toggleDayNight:function(){this.nightFlag=!this.nightFlag,this.Util.StorageSetter("last_nightFlag",this.nightFlag)},prevChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.prevChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},nextChapter:function(t){var e=this;this.stopBubble(t),this.ReaderModel.nextChapter(function(t){e.fictionData=t}),console.log(this.chapterId)},stopBubble:function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},Util:function(){this.Util=function(){var t="html5_reader_";return{StorageGetter:function(e){return localStorage.getItem(t+e)},StorageSetter:function(e,n){return localStorage.setItem(t+e,n)},getBSONP:function(t,e){return $.jsonp({url:t,cache:!0,callback:"duokan_fiction_chapter",success:function(t){var n=$.base64.decode(t),o=decodeURIComponent(escape(n));e(JSON.parse(o))}})}}}()},ReaderModel:function(){var t=this;this.ReaderModel=function(){var e=function(t){n().then(function(){return o()}).then(function(e){t&&t(e)})},n=function(){return new Promise(function(e,n){$.get("/data/chapter",function(o){0==o.result?(t.chapterTotal=o.chapters.length,e(o)):n({msg:"fail"})},"json")})},o=function(){return new Promise(function(e,n){$.get("/test/data/data"+t.chapterId+".json",function(o){if(0==o.result){var a=o.jsonp;t.Util.getBSONP(a,function(t){e(t)})}else n({msg:"fail"})},"json")})};return{init:e,prevChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId-=1,t.chapterId<0)return t.alertFlag=!0,void(t.chapterId=0);o(t.chapterId,e),t.Util.StorageSetter("last_chapterId",t.chapterId)},nextChapter:function(e){if(t.chapterId=parseInt(t.chapterId,10),t.chapterId+=1,t.chapterId>t.chapterTotal-1)return t.alertFlag=!0,void(t.chapterId=t.chapterTotal-1);o(t.chapterId,e),t.Util.StorageSetter("last_chapterId",t.chapterId)}}}()}}})},2:function(t,e){},43:function(t,e){},44:function(t,e){},45:function(t,e){},46:function(t,e){},47:function(t,e){},52:function(t,e,n){n(0),n(13),t.exports=n(12)}});